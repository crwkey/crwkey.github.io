<!doctype html><html xmlns=http://www.w3.org/1999/xhtml xml:lang=en-us lang=en-us><head><link href=https://gmpg.org/xfn/11 rel=profile><meta charset=utf-8><meta name=generator content="Hugo 0.110.0"><meta name=viewport content="width=device-width,initial-scale=1"><script async src="https://www.googletagmanager.com/gtag/js?id=G-CHP0LWG5GF"></script>
<script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-CHP0LWG5GF")</script><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-2009162505910536" crossorigin=anonymous></script><title>SHELL 字符串截取 &#183; rwkey</title><meta name=description content><link type=text/css rel=stylesheet href=https://rwkey.com/css/print.css media=print><link type=text/css rel=stylesheet href=https://rwkey.com/css/poole.css><link type=text/css rel=stylesheet href=https://rwkey.com/css/syntax.css><link type=text/css rel=stylesheet href=https://rwkey.com/css/hyde.css><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Abril+Fatface|PT+Sans:400,400i,700"><link rel=apple-touch-icon-precomposed sizes=144x144 href=/apple-touch-icon-144-precomposed.png><link rel="shortcut icon" href=/favicon.png></head><body><aside class=sidebar><div class="container sidebar-sticky"><div class=sidebar-about><a href=https://rwkey.com/><h1>rwkey</h1></a><p class=lead>北漂码农</p></div><nav><ul class=sidebar-nav><li><a href=https://rwkey.com/>Home</a></li><li><a href=https://github.com/crwkey/>Github</a></li></ul></nav><p>&copy; 2023. All rights reserved.</p></div></aside><main class="content container"><div class=post><h1>SHELL 字符串截取</h1><time datetime=2021-04-10T10:57:58+0800 class=post-date>Sat, Apr 10, 2021</time><p>关于 Linux SHELL 字符串截取有几种方法，第一种就是 ${var} 运算符，另外一种就是 cut 命令。</p><h1 id=var-运算符>${var} 运算符</h1><table><thead><tr><th style=text-align:center>命令</th><th style=text-align:center>用法</th></tr></thead><tbody><tr><td style=text-align:center>${var#*string}</td><td style=text-align:center>var 是变量名， #是运算符，*string 表示从左边开始删除第一个string及左边的字符</td></tr><tr><td style=text-align:center>${var##* string}</td><td style=text-align:center>在 var 字符串里面从左往右找，删除最后一个找到的 string，以及左边的字符</td></tr><tr><td style=text-align:center>${var%string*}</td><td style=text-align:center>在 var 字符串里面从右往左找，删除第一个找到的 string，以及右边的字符</td></tr><tr><td style=text-align:center>${var%%string*}</td><td style=text-align:center>在 var 字符串里面从右往左找，删除最后一个找到的 string，以及右边的字符</td></tr><tr><td style=text-align:center>${var:n1:len}</td><td style=text-align:center>截取 var 字符串里面从第n1个字符串开始的 len 个字符</td></tr><tr><td style=text-align:center>${var:n1}</td><td style=text-align:center>从 var 第 n1 个字符开始，一直到结束</td></tr><tr><td style=text-align:center>${var:0-n1}</td><td style=text-align:center>从右第n1个字符开始，直到结束</td></tr><tr><td style=text-align:center>${var:0-n1:len}</td><td style=text-align:center>从右第 n1 个字符开始，取 len 个字符，直到结束</td></tr></tbody></table><p>举例说明</p><p>下面我以 var=&ldquo;<a href=https://github.com/JakeWharton/uniqtoo/blob/1654dab775/src/main.rs%22>https://github.com/JakeWharton/uniqtoo/blob/1654dab775/src/main.rs"</a> 为例进行说明</p><ol><li>截取文件名
${var#*src/}</li><li>保留 https
${var%://github*}</li><li>截取前 5 个字符
${var:0:5}</li></ol><h1 id=cut-命令>cut 命令</h1><p>可以从标准输入或文件切出字段</p><table><thead><tr><th style=text-align:center>command</th><th style=text-align:center>useage</th></tr></thead><tbody><tr><td style=text-align:center>cut -d&rsquo;:&rsquo; -f2</td><td style=text-align:center>-d 指定分隔符， 这里是 : ，-f 是取第几列</td></tr><tr><td style=text-align:center>cut -c 1-3</td><td style=text-align:center>截取第 1 ~ 3 个字符</td></tr></tbody></table><p>举例说明</p><p>比如字符串 var=&ldquo;aaa, bbb, ccc&rdquo;</p><p>执行 <code>echo $var | cut -d',' -f1-2 </code>, 结果是 <code>aaa,bbb</code></p></div></main><script async src="https://www.googletagmanager.com/gtag/js?id=G-CHP0LWG5GF"></script>
<script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-CHP0LWG5GF")</script></body></html>